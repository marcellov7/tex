!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.tex={})}(this,function(e){"use strict";var t=function(e,t){var n=e.querySelector('input[type="color"]');return(n=document.createElement("input")).type="color",n.style.display="block",e.appendChild(n),n.addEventListener("input",()=>{s(t,n.value),"textColor"==t&&(e.querySelector("span").style.color=n.value,s("foreColor",n.value)),"textBackColor"==t&&(e.querySelector("#textBackColor").style.background=n.value,s("backColor",n.value))}),!1},n=function(e){var t=e.querySelector("select");return t=document.createElement("select"),[3,4,5,6,7].forEach(e=>{let n=document.createElement("option");n.value=e,n.textContent=e,t.appendChild(n)}),e.appendChild(t),t.addEventListener("change",()=>{s("fontSize",t.value)}),!1},i="defaultParagraphSeparator",r="formatBlock",l=function e(t,n,i){return t.addEventListener(n,i)},o=function e(t,n){return t.appendChild(n)},a=function e(t){return document.createElement(t)},u=function e(t){return document.queryCommandState(t)},s=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return document.execCommand(t,!1,n)},c={fontSize:{icon:"\uD83D\uDDDA",title:"Font Size",result(){}},bold:{icon:"<b>B</b>",title:"Bold",state:()=>u("bold"),result:()=>s("bold")},italic:{icon:"<i>I</i>",title:"Italic",state:()=>u("italic"),result:()=>s("italic")},underline:{icon:"<u>U</u>",title:"Underline",state:()=>u("underline"),result:()=>s("underline")},removeFormat:{icon:"⌫",title:"Remove Format",result:()=>s("removeFormat")},strikethrough:{icon:"<strike>S</strike>",title:"Strike-through",state:()=>u("strikeThrough"),result:()=>s("strikeThrough")},heading1:{icon:"<b>H<sub>1</sub></b>",title:"Heading 1",result:()=>s(r,"<h1>")},heading2:{icon:"<b>H<sub>2</sub></b>",title:"Heading 2",result:()=>s(r,"<h2>")},paragraph:{icon:"&#182;",title:"Paragraph",result:()=>s(r,"<p>")},quote:{icon:"&#8220; &#8221;",title:"Quote",result:()=>s(r,"<blockquote>")},olist:{icon:"&#35;",title:"Ordered List",result:()=>s("insertOrderedList")},ulist:{icon:"&#8226;",title:"Unordered List",result:()=>s("insertUnorderedList")},code:{icon:"&lt;/&gt;",title:"Code",result:()=>s(r,"<pre>")},line:{icon:"&#8213;",title:"Horizontal Line",result:()=>s("insertHorizontalRule")},link:{icon:"&#128279;",title:"Link",result(){let e=window.prompt("Enter the link URL");e&&s("createLink",e)}},image:{icon:"Img",title:"Image",result(){let e=window.prompt("Enter the image URL");e&&s("insertImage",e)}},html:{icon:"HTML",title:"Html",result({content:e}){let t=e.parentNode,n=t.querySelector(".htmlContent"),i=t.querySelector(".tex-content");n&&("none"===n.style.display?(n.style.display="block",i.style.display="none"):(n.style.display="none",i.style.display="block"))}},textColor:{icon:"A",title:"Text Color",result(){}},textBackColor:{icon:'<span id="textBackColor" style="padding:3px; background:lightgray;">A</span>',title:"Text Color",result(){}},indent:{icon:"&rsaquo;",title:"Indent",result:()=>s("indent")},outdent:{icon:"&lsaquo;",title:"Outdent",result:()=>s("outdent")},undo:{icon:"↶",title:"Undo",result:()=>s("undo")},redo:{icon:"↷",title:"Redo",result:()=>s("redo")},justifyCenter:{icon:"⇥⇤",title:"Justify Center",result:()=>s("justifyCenter")},justifyFull:{icon:"⇤⇥",title:"Justify Full",result:()=>s("justifyFull")},justifyLeft:{icon:"⇤",title:"Justify Left",result:()=>s("justifyLeft")},justifyRight:{icon:"⇥",title:"Justify Right",result:()=>s("justifyRight")}},d=e=>{var t=document.querySelector(`[tex-id="${e.id}"]`),n=document.getElementById(e.id),i=t.querySelector(".tex-content"),r=t.querySelector(".tex-actionbar");if(t){var l=i.cloneNode(!0);i.parentNode.replaceChild(l,i);var o=r.cloneNode(!0);r.parentNode.replaceChild(o,r),o.remove(),"textarea"===n.tagName.toLowerCase()?(n.style.display="block",t.remove()):(t.innerHTML=l.innerHTML,t.removeAttribute("tex-id"),t.classList.remove("theme-light","theme-dark","tex-container"))}},m=e=>{let t=document.querySelector(`[tex-id="${e.id}"]`),n=t.querySelector(".tex-content");return n.innerHTML},y=e=>{var u=e.theme||"light",d=e[i]||"div",m=a("div");m.className="tex-container",m.classList.add(`theme-${u}`),m.setAttribute("tex-id",e.element.id);var y=a("div");y.className="tex-actionbar",o(m,y);var p=e.element.content=a("div");p.contentEditable=!0,p.className="tex-content tex-editor","textarea"===e.element.tagName.toLowerCase()?p.innerHTML=e.element.value:p.innerHTML=e.element.innerHTML,p.onkeydown=e=>{var t;"Enter"===e.key&&"blockquote"===(t=r,document.queryCommandValue(t))&&setTimeout(()=>s(r,`<${d}>`),0)},o(m,p),e.element.parentNode.insertBefore(m,e.element.nextSibling);let f=[];e.buttons?(e.plugins&&(console.log(e.plugins),e.plugins.forEach(function(e){c[e.name]=e})),f=e.buttons.map(e=>{var t=c[e];if(t)return{icon:t.icon,title:t.title,key:e,result:t.result}}).filter(e=>void 0!==e)):e.actions&&(f=e.actions.map(e=>"string"==typeof e?c[e]:"custom"===e.name?{icon:e.icon,title:e.title,result:e.result}:c[e.name]?{...c[e.name],...e}:e)),f.forEach(e=>{var i=a("button");if(i.className="tex-button",i.innerHTML="<span>"+e.icon+"</span>",i.title=e.title,i.setAttribute("type","button"),i.onclick=()=>e.result({action:e,content:p,button:i})&&p.focus(),e.state){var r=()=>i.classList[e.state()?"add":"remove"]("tex-button-selected");l(p,"keyup",r),l(p,"mouseup",r),l(i,"click",r)}o(y,i),"fontSize"==e.key&&n(i),"textColor"==e.key&&t(i,"textColor"),"textBackColor"==e.key&&t(i,"textBackColor")}),e.cssStyle&&s("styleWithCSS"),s(i,d),"textarea"===e.element.tagName.toLowerCase()?e.element.style.display="none":(document.getElementById(e.element.id).remove(),m.id=e.element.id);var g=a("textarea");return g.setAttribute("class","htmlContent"),o(m,g),g.value=p.innerHTML,g.style.display="none",p.oninput=({target:{firstChild:t}})=>{t&&3===t.nodeType?s(r,`<${d}>`):"<br>"===p.innerHTML&&(p.innerHTML=""),e.onChange(p.innerHTML),"textarea"===e.element.tagName.toLowerCase()&&(e.element.value=p.innerHTML),g.value=p.innerHTML},g.oninput=({target:{firstChild:t}})=>{p.innerHTML=g.value,e.element.value=p.innerHTML,e.onChange(p.innerHTML)},e.element};e.exec=s,e.init=y,e.destroy=d,e.getContent=m,e.default={exec:s,init:y,destroy:d,getContent:m},Object.defineProperty(e,"__esModule",{value:!0})});