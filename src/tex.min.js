(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):b(a.tex={})})(this,function(a){'use strict';var b=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},c="defaultParagraphSeparator",d="formatBlock",e=function(a,b,c){return a.addEventListener(b,c)},f=function(a,b){return a.appendChild(b)},g=function(a){return document.createElement(a)},h=function(a){return document.queryCommandState(a)},i=function(a){return document.queryCommandValue(a)},j=function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null;return document.execCommand(a,!1,b)},k={fontSize:{icon:"\uD83D\uDDDA",title:"Font Size",result:(a,b)=>{let c=document.getElementById("fontSizeSelect");if(!c){c=document.createElement("select"),c.id="fontSizeSelect";[3,4,5,6,7].forEach(a=>{const b=document.createElement("option");b.value=a,b.textContent=a,c.appendChild(b)}),b.parentNode.insertBefore(c,b.nextSibling),c.addEventListener("change",()=>{const a=c.value;j("fontSize",a+"px")})}else c.parentNode.removeChild(c)}},bold:{icon:"<b>B</b>",title:"Bold",state:()=>h("bold"),result:()=>j("bold")},italic:{icon:"<i>I</i>",title:"Italic",state:()=>h("italic"),result:()=>j("italic")},underline:{icon:"<u>U</u>",title:"Underline",state:()=>h("underline"),result:()=>j("underline")},removeFormat:{icon:"\u232B",title:"Remove Format",result:()=>j("removeFormat")},strikethrough:{icon:"<strike>S</strike>",title:"Strike-through",state:()=>h("strikeThrough"),result:()=>j("strikeThrough")},heading1:{icon:"<b>H<sub>1</sub></b>",title:"Heading 1",result:()=>j(d,"<h1>")},heading2:{icon:"<b>H<sub>2</sub></b>",title:"Heading 2",result:()=>j(d,"<h2>")},paragraph:{icon:"&#182;",title:"Paragraph",result:()=>j(d,"<p>")},quote:{icon:"&#8220; &#8221;",title:"Quote",result:()=>j(d,"<blockquote>")},olist:{icon:"&#35;",title:"Ordered List",result:()=>j("insertOrderedList")},ulist:{icon:"&#8226;",title:"Unordered List",result:()=>j("insertUnorderedList")},code:{icon:"&lt;/&gt;",title:"Code",result:()=>j(d,"<pre>")},line:{icon:"&#8213;",title:"Horizontal Line",result:()=>j("insertHorizontalRule")},link:{icon:"&#128279;",title:"Link",result:()=>{const a=window.prompt("Enter the link URL");a&&j("createLink",a)}},image:{icon:"Img",title:"Image",result:()=>{const a=window.prompt("Enter the image URL");a&&j("insertImage",a)}},html:{icon:"HTML",title:"Html",result:a=>{const b=a.parentNode,c=b.querySelector(".htmlContent"),d=b.querySelector(".tex-content");c&&("none"===c.style.display?(c.style.display="block",d.style.display="none"):(c.style.display="none",d.style.display="block"))}},textColor:{icon:"<span>A</span>",title:"Text Color",result:(a,b)=>{let c=document.getElementById("textColorInput");c?c.parentNode.removeChild(c):(c=document.createElement("input"),c.id="textColorInput",c.type="color",c.addEventListener("input",()=>{j("foreColor",c.value),b.style.color=c.value}),b.parentNode.insertBefore(c,b.nextSibling))}},textBackColor:{icon:"<span style=\"padding:3px; background:lightgray;\">A</span>",title:"Text Color",result:(a,b)=>{let c=document.getElementById("textColorInput");c?c.parentNode.removeChild(c):(c=document.createElement("input"),c.id="textColorInput",c.type="color",c.addEventListener("input",()=>{j("backColor",c.value),b.querySelector("span").style.background=c.value}),b.parentNode.insertBefore(c,b.nextSibling))}},indent:{icon:"&rsaquo;",title:"Indent",result:()=>j("indent")},outdent:{icon:"&lsaquo;",title:"Outdent",result:()=>j("outdent")},undo:{icon:"\u21B6",title:"Undo",result:()=>j("undo")},redo:{icon:"\u21B7",title:"Redo",result:()=>j("redo")},justifyCenter:{icon:"\u21E5\u21E4",title:"Justify Center",result:()=>j("justifyCenter")},justifyFull:{icon:"\u21E4\u21E5",title:"Justify Full",result:()=>j("justifyFull")},justifyLeft:{icon:"\u21E4",title:"Justify Left",result:()=>j("justifyLeft")},justifyRight:{icon:"\u21E5",title:"Justify Right",result:()=>j("justifyRight")}},l={actionbar:"tex-actionbar",button:"tex-button",content:"tex-content tex-editor",selected:"tex-button-selected"},m=a=>{var b=document.querySelector(`[tex-id="${a.id}"]`),c=document.getElementById(a.id),d=b.querySelector(".tex-content"),e=b.querySelector(".tex-actionbar");if(b){var f=d.cloneNode(!0);d.parentNode.replaceChild(f,d);var g=e.cloneNode(!0);e.parentNode.replaceChild(g,e),g.remove(),"textarea"===c.tagName.toLowerCase()?(c.style.display="block",b.remove()):(b.innerHTML=f.innerHTML,b.removeAttribute("tex-id"),b.classList.remove("theme-light","theme-dark","tex-container"))}},n=a=>{const b=document.querySelector(`[tex-id="${a.id}"]`),c=b.querySelector(".tex-content");return c.innerHTML},o=a=>{var b=a.theme||"light",h={...l,...a.classes},m=a[c]||"div",n=g("div");n.className="tex-container",n.classList.add(`theme-${b}`),n.setAttribute("tex-id",a.element.id);var o=g("div");o.className=h.actionbar,f(n,o);var p=a.element.content=g("div");p.contentEditable=!0,p.className=h.content,p.innerHTML="textarea"===a.element.tagName.toLowerCase()?a.element.value:a.element.innerHTML,p.onkeydown=a=>{"Enter"===a.key&&"blockquote"===i(d)&&setTimeout(()=>j(d,`<${m}>`),0)},f(n,p),f(a.element.parentNode,n);let q=[];a.buttons?q=a.buttons.map(a=>{var b=k[a];if(b)return{icon:b.icon,title:b.title,key:a,result:b.result}}).filter(a=>void 0!==a):a.actions&&(q=a.actions.map(a=>"string"==typeof a?k[a]:"custom"===a.name?{icon:a.icon,title:a.title,result:a.result}:k[a.name]?{...k[a.name],...a}:a)),q.forEach(a=>{var b=g("button");if(b.className=h.button,b.innerHTML=a.icon,b.title=a.title,b.setAttribute("type","button"),b.onclick=()=>a.result(p,b)&&p.focus(),a.state){var c=()=>b.classList[a.state()?"add":"remove"](h.selected);e(p,"keyup",c),e(p,"mouseup",c),e(b,"click",c)}f(o,b)}),a.styleWithCSS&&j("styleWithCSS"),j(c,m),"textarea"===a.element.tagName.toLowerCase()?a.element.style.display="none":(document.getElementById(a.element.id).remove(),n.id=a.element.id);var r=g("textarea");return r.setAttribute("class","htmlContent"),f(n,r),r.value=p.innerHTML,r.style.display="none",p.oninput=({target:{firstChild:b}})=>{b&&3===b.nodeType?j(d,`<${m}>`):"<br>"===p.innerHTML&&(p.innerHTML=""),a.onChange(p.innerHTML),"textarea"===a.element.tagName.toLowerCase()&&(a.element.value=p.innerHTML),r.value=p.innerHTML},r.oninput=({target:{firstChild:b}})=>{p.innerHTML=r.value,a.element.value=p.innerHTML},a.element};a.exec=j,a.init=o,a.destroy=m,a.getContent=n,a["default"]={exec:j,init:o,destroy:m,getContent:n},Object.defineProperty(a,"__esModule",{value:!0})});