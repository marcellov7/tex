(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):b(a.tex={})})(this,function(a){'use strict';var b=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},c="defaultParagraphSeparator",d="formatBlock",e=function(a,b,c){return a.addEventListener(b,c)},f=function(a,b){return a.appendChild(b)},g=function(a){return document.createElement(a)},h=function(a){return document.queryCommandState(a)},i=function(a){return document.queryCommandValue(a)},j=function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null;return document.execCommand(a,!1,b)},k={bold:{icon:"<b>B</b>",title:"Bold",state:function(){return h("bold")},result:function(){return j("bold")}},italic:{icon:"<i>I</i>",title:"Italic",state:function(){return h("italic")},result:function(){return j("italic")}},underline:{icon:"<u>U</u>",title:"Underline",state:function(){return h("underline")},result:function(){return j("underline")}},removeFormat:{icon:"\u232B",title:"Remove Format",result:function(){return j("removeFormat")}},strikethrough:{icon:"<strike>S</strike>",title:"Strike-through",state:function(){return h("strikeThrough")},result:function(){return j("strikeThrough")}},heading1:{icon:"<b>H<sub>1</sub></b>",title:"Heading 1",result:function(){return j(d,"<h1>")}},heading2:{icon:"<b>H<sub>2</sub></b>",title:"Heading 2",result:function(){return j(d,"<h2>")}},paragraph:{icon:"&#182;",title:"Paragraph",result:function(){return j(d,"<p>")}},quote:{icon:"&#8220; &#8221;",title:"Quote",result:function(){return j(d,"<blockquote>")}},olist:{icon:"&#35;",title:"Ordered List",result:function(){return j("insertOrderedList")}},ulist:{icon:"&#8226;",title:"Unordered List",result:function(){return j("insertUnorderedList")}},code:{icon:"&lt;/&gt;",title:"Code",result:function(){return j(d,"<pre>")}},line:{icon:"&#8213;",title:"Horizontal Line",result:function(){return j("insertHorizontalRule")}},link:{icon:"&#128279;",title:"Link",result:function(){var a=window.prompt("Enter the link URL");a&&j("createLink",a)}},image:{icon:"\uD83D\uDDBC\uFE0F",title:"Image",result:function(){var a=window.prompt("Enter the image URL");a&&j("insertImage",a)}},html:{icon:"HTML",title:"Html",result:function(a){var b=a.parentNode,c=b.querySelector(".htmlContent"),d=b.querySelector(".tex-content");c&&("none"===c.style.display?(c.style.display="block",d.style.display="none"):(c.style.display="none",d.style.display="block"))}},textColor:{icon:"\uD83C\uDFA8",title:"Text Color",result:function(){var a=document.createElement("input");a.type="color",a.addEventListener("input",function(){j("foreColor",a.value)}),a.click()}}},l={actionbar:"tex-actionbar",button:"tex-button",content:"tex-content tex-editor",selected:"tex-button-selected"},m=function(a){var b=document.querySelector("[tex-id=\""+a.id+"\"]"),c=document.getElementById(a.id),d=b.querySelector(".tex-content"),e=b.querySelector(".tex-actionbar");if(b){var f=d.cloneNode(!0);d.parentNode.replaceChild(f,d);var g=e.cloneNode(!0);e.parentNode.replaceChild(g,e),g.remove(),"textarea"===c.tagName.toLowerCase()?(c.style.display="block",b.remove()):(b.innerHTML=f.innerHTML,b.removeAttribute("tex-id"),b.classList.remove("theme-light","theme-dark","tex-container"))}},n=function(a){var b=document.querySelector("[tex-id=\""+a.id+"\"]"),c=b.querySelector(".tex-content");return c.innerHTML},o=function(a){var h=a.theme||"light",m=b({},l,a.classes),n=a[c]||"div",o=g("div");o.className="tex-container",o.classList.add("theme-"+h),o.setAttribute("tex-id",a.element.id);var p=g("div");p.className=m.actionbar,f(o,p);var q=a.element.content=g("div");q.contentEditable=!0,q.className=m.content,q.innerHTML="textarea"===a.element.tagName.toLowerCase()?a.element.value:a.element.innerHTML,q.onkeydown=function(a){"Enter"===a.key&&"blockquote"===i(d)&&setTimeout(function(){return j(d,"<"+n+">")},0)},f(o,q),f(a.element.parentNode,o);var r=[];a.buttons?r=a.buttons.map(function(a){var b=k[a];if(b)return{icon:b.icon,title:b.title,key:a,result:b.result}}).filter(function(a){return void 0!==a}):a.actions&&(r=a.actions.map(function(a){return"string"==typeof a?k[a]:"custom"===a.name?{icon:a.icon,title:a.title,result:a.result}:k[a.name]?b({},k[a.name],a):a})),r.forEach(function(a){var b=g("button");if(b.className=m.button,b.innerHTML=a.icon,b.title=a.title,b.setAttribute("type","button"),b.onclick=function(){return a.result(q),q.focus()},a.state){var c=function(){return b.classList[a.state()?"add":"remove"](m.selected)};e(q,"keyup",c),e(q,"mouseup",c),e(b,"click",c)}f(p,b)}),a.styleWithCSS&&j("styleWithCSS"),j(c,n),"textarea"===a.element.tagName.toLowerCase()?a.element.style.display="none":(document.getElementById(a.element.id).remove(),o.id=a.element.id);var s=g("textarea");return s.setAttribute("class","htmlContent"),f(o,s),s.value=q.innerHTML,s.style.display="none",q.oninput=function(b){var c=b.target.firstChild;c&&3===c.nodeType?j(d,"<"+n+">"):"<br>"===q.innerHTML&&(q.innerHTML=""),a.onChange(q.innerHTML),"textarea"===a.element.tagName.toLowerCase()&&(a.element.value=q.innerHTML),s.value=q.innerHTML},s.oninput=function(){q.innerHTML=s.value,a.element.value=q.innerHTML},a.element};a.exec=j,a.init=o,a.destroy=m,a.getContent=n,a["default"]={exec:j,init:o,destroy:m,getContent:n},Object.defineProperty(a,"__esModule",{value:!0})});