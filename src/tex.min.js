(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):b(a.tex={})})(this,function(a){'use strict';var b=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},c=function(a,b){var c=a.querySelector("input[type=\"color\"]");return c=document.createElement("input"),c.type="color",c.style.display="block",a.appendChild(c),c.addEventListener("input",()=>{l(b,c.value),"textColor"==b&&(a.querySelector("span").style.color=c.value,l("foreColor",c.value)),"textBackColor"==b&&(a.querySelector("#textBackColor").style.background=c.value,l("backColor",c.value))}),!1},d=function(a){var b=a.querySelector("select");b=document.createElement("select");return[3,4,5,6,7].forEach(a=>{const c=document.createElement("option");c.value=a,c.textContent=a,b.appendChild(c)}),a.appendChild(b),b.addEventListener("change",()=>{l("fontSize",b.value)}),!1},e="defaultParagraphSeparator",f="formatBlock",g=function(a,b,c){return a.addEventListener(b,c)},h=function(a,b){return a.appendChild(b)},i=function(a){return document.createElement(a)},j=function(a){return document.queryCommandState(a)},k=function(a){return document.queryCommandValue(a)},l=function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null;return document.execCommand(a,!1,b)},m={fontSize:{icon:"\uD83D\uDDDA",title:"Font Size",result:()=>{}},bold:{icon:"<b>B</b>",title:"Bold",state:()=>j("bold"),result:()=>l("bold")},italic:{icon:"<i>I</i>",title:"Italic",state:()=>j("italic"),result:()=>l("italic")},underline:{icon:"<u>U</u>",title:"Underline",state:()=>j("underline"),result:()=>l("underline")},removeFormat:{icon:"\u232B",title:"Remove Format",result:()=>l("removeFormat")},strikethrough:{icon:"<strike>S</strike>",title:"Strike-through",state:()=>j("strikeThrough"),result:()=>l("strikeThrough")},heading1:{icon:"<b>H<sub>1</sub></b>",title:"Heading 1",result:()=>l(f,"<h1>")},heading2:{icon:"<b>H<sub>2</sub></b>",title:"Heading 2",result:()=>l(f,"<h2>")},paragraph:{icon:"&#182;",title:"Paragraph",result:()=>l(f,"<p>")},quote:{icon:"&#8220; &#8221;",title:"Quote",result:()=>l(f,"<blockquote>")},olist:{icon:"&#35;",title:"Ordered List",result:()=>l("insertOrderedList")},ulist:{icon:"&#8226;",title:"Unordered List",result:()=>l("insertUnorderedList")},code:{icon:"&lt;/&gt;",title:"Code",result:()=>l(f,"<pre>")},line:{icon:"&#8213;",title:"Horizontal Line",result:()=>l("insertHorizontalRule")},link:{icon:"&#128279;",title:"Link",result:()=>{const a=window.prompt("Enter the link URL");a&&l("createLink",a)}},image:{icon:"Img",title:"Image",result:()=>{const a=window.prompt("Enter the image URL");a&&l("insertImage",a)}},html:{icon:"HTML",title:"Html",result:({content:a})=>{const b=a.parentNode,c=b.querySelector(".htmlContent"),d=b.querySelector(".tex-content");c&&("none"===c.style.display?(c.style.display="block",d.style.display="none"):(c.style.display="none",d.style.display="block"))}},textColor:{icon:"A",title:"Text Color",result:()=>{}},textBackColor:{icon:"<span id=\"textBackColor\" style=\"padding:3px; background:lightgray;\">A</span>",title:"Text Color",result:()=>{}},indent:{icon:"&rsaquo;",title:"Indent",result:()=>l("indent")},outdent:{icon:"&lsaquo;",title:"Outdent",result:()=>l("outdent")},undo:{icon:"\u21B6",title:"Undo",result:()=>l("undo")},redo:{icon:"\u21B7",title:"Redo",result:()=>l("redo")},justifyCenter:{icon:"\u21E5\u21E4",title:"Justify Center",result:()=>l("justifyCenter")},justifyFull:{icon:"\u21E4\u21E5",title:"Justify Full",result:()=>l("justifyFull")},justifyLeft:{icon:"\u21E4",title:"Justify Left",result:()=>l("justifyLeft")},justifyRight:{icon:"\u21E5",title:"Justify Right",result:()=>l("justifyRight")}},n=a=>{var b=document.querySelector(`[tex-id="${a.id}"]`),c=document.getElementById(a.id),d=b.querySelector(".tex-content"),e=b.querySelector(".tex-actionbar");if(b){var f=d.cloneNode(!0);d.parentNode.replaceChild(f,d);var g=e.cloneNode(!0);e.parentNode.replaceChild(g,e),g.remove(),"textarea"===c.tagName.toLowerCase()?(c.style.display="block",b.remove()):(b.innerHTML=f.innerHTML,b.removeAttribute("tex-id"),b.classList.remove("theme-light","theme-dark","tex-container"))}},o=a=>{const b=document.querySelector(`[tex-id="${a.id}"]`),c=b.querySelector(".tex-content");return c.innerHTML},p=a=>{var b=a.theme||"light",j=a[e]||"div",n=i("div");n.className="tex-container",n.classList.add(`theme-${b}`),n.setAttribute("tex-id",a.element.id);var o=i("div");o.className="tex-actionbar",h(n,o);var p=a.element.content=i("div");p.contentEditable=!0,p.className="tex-content tex-editor",p.innerHTML="textarea"===a.element.tagName.toLowerCase()?a.element.value:a.element.innerHTML,p.onkeydown=a=>{"Enter"===a.key&&"blockquote"===k(f)&&setTimeout(()=>l(f,`<${j}>`),0)},h(n,p),a.element.parentNode.insertBefore(n,a.element.nextSibling);let q=[];a.buttons?(a.plugins&&(console.log(a.plugins),a.plugins.forEach(function(a){m[a.name]=a})),q=a.buttons.map(a=>{var b=m[a];if(b)return{icon:b.icon,title:b.title,key:a,result:b.result}}).filter(a=>void 0!==a)):a.actions&&(q=a.actions.map(a=>"string"==typeof a?m[a]:"custom"===a.name?{icon:a.icon,title:a.title,result:a.result}:m[a.name]?{...m[a.name],...a}:a)),q.forEach(a=>{var b=i("button");if(b.className="tex-button",b.innerHTML="<span>"+a.icon+"</span>",b.title=a.title,b.setAttribute("type","button"),b.onclick=()=>a.result({action:a,content:p,button:b})&&p.focus(),a.state){var e=()=>b.classList[a.state()?"add":"remove"]("tex-button-selected");g(p,"keyup",e),g(p,"mouseup",e),g(b,"click",e)}h(o,b),"fontSize"==a.key&&d(b),"textColor"==a.key&&c(b,"textColor"),"textBackColor"==a.key&&c(b,"textBackColor")}),a.cssStyle&&l("styleWithCSS"),l(e,j),"textarea"===a.element.tagName.toLowerCase()?a.element.style.display="none":(document.getElementById(a.element.id).remove(),n.id=a.element.id);var r=i("textarea");return r.setAttribute("class","htmlContent"),h(n,r),r.value=p.innerHTML,r.style.display="none",p.oninput=({target:{firstChild:b}})=>{b&&3===b.nodeType?l(f,`<${j}>`):"<br>"===p.innerHTML&&(p.innerHTML=""),a.onChange(p.innerHTML),"textarea"===a.element.tagName.toLowerCase()&&(a.element.value=p.innerHTML),r.value=p.innerHTML},r.oninput=({target:{firstChild:b}})=>{p.innerHTML=r.value,a.element.value=p.innerHTML},a.element};a.exec=l,a.init=p,a.destroy=n,a.getContent=o,a["default"]={exec:l,init:p,destroy:n,getContent:o},Object.defineProperty(a,"__esModule",{value:!0})});