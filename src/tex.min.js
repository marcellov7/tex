!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.tex={})}(this,function(e){"use strict";function a(e,t,n){return e.addEventListener(t,n)}function c(e,t){return e.appendChild(t)}function s(e){return document.createElement(e)}function t(e){return document.queryCommandState(e)}function d(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return document.execCommand(e,!1,t)}function n(t){var e=t.theme||"light",r=m({},v,t.classes),n=t[f]||"div",i=s("div");i.className="tex-container",i.classList.add("theme-"+e);var o=s("div");o.className=r.actionbar,c(i,o);var u=t.element.content=s("div");u.contentEditable=!0,u.className=r.content,"textarea"===t.element.tagName.toLowerCase()?u.innerHTML=t.element.value:u.innerHTML=t.element.innerHTML,u.onkeydown=function(e){"Enter"===e.key&&"blockquote"===(e=p,document.queryCommandValue(e))&&setTimeout(function(){return d(p,"<"+n+">")},0)},c(i,u),c(t.element.parentNode,i),e=[],t.buttons?e=t.buttons.map(function(e){var t=b[e];if(t)return{icon:t.icon,title:t.title,key:e,result:t.result}}).filter(function(e){return void 0!==e}):t.actions&&(e=t.actions.map(function(e){return"string"==typeof e?b[e]:"custom"===e.name?{icon:e.icon,title:e.title,result:e.result}:b[e.name]?m({},b[e.name],e):e})),e.forEach(function(e){var t,n=s("button");n.className=r.button,n.innerHTML=e.icon,n.title=e.title,n.setAttribute("type","button"),n.onclick=function(){return e.result(u),u.focus()},e.state&&(a(u,"keyup",t=function(){return n.classList[e.state()?"add":"remove"](r.selected)}),a(u,"mouseup",t),a(n,"click",t)),c(o,n)}),t.styleWithCSS&&d("styleWithCSS"),d(f,n),"textarea"===t.element.tagName.toLowerCase()?t.element.style.display="none":(document.getElementById(t.element.id).remove(),i.id=t.element.id);var l=s("textarea");return l.setAttribute("class","htmlContent"),c(i,l),l.value=u.innerHTML,l.style.display="none",u.oninput=function(e){e=e.target.firstChild;e&&3===e.nodeType?d(p,"<"+n+">"):"<br>"===u.innerHTML&&(u.innerHTML=""),"textarea"===t.element.tagName.toLowerCase()&&(t.element.value=u.innerHTML),l.value=u.innerHTML},l.oninput=function(e){u.innerHTML=l.value,t.element.value=u.innerHTML},t.element}var m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f="defaultParagraphSeparator",p="formatBlock",b={bold:{icon:"<b>B</b>",title:"Bold",state:function(){return t("bold")},result:function(){return d("bold")}},italic:{icon:"<i>I</i>",title:"Italic",state:function(){return t("italic")},result:function(){return d("italic")}},underline:{icon:"<u>U</u>",title:"Underline",state:function(){return t("underline")},result:function(){return d("underline")}},removeFormat:{icon:"‚å´",title:"Remove Format",result:function(){return d("removeFormat")}},strikethrough:{icon:"<strike>S</strike>",title:"Strike-through",state:function(){return t("strikeThrough")},result:function(){return d("strikeThrough")}},heading1:{icon:"<b>H<sub>1</sub></b>",title:"Heading 1",result:function(){return d(p,"<h1>")}},heading2:{icon:"<b>H<sub>2</sub></b>",title:"Heading 2",result:function(){return d(p,"<h2>")}},paragraph:{icon:"&#182;",title:"Paragraph",result:function(){return d(p,"<p>")}},quote:{icon:"&#8220; &#8221;",title:"Quote",result:function(){return d(p,"<blockquote>")}},olist:{icon:"&#35;",title:"Ordered List",result:function(){return d("insertOrderedList")}},ulist:{icon:"&#8226;",title:"Unordered List",result:function(){return d("insertUnorderedList")}},code:{icon:"&lt;/&gt;",title:"Code",result:function(){return d(p,"<pre>")}},line:{icon:"&#8213;",title:"Horizontal Line",result:function(){return d("insertHorizontalRule")}},link:{icon:"&#128279;",title:"Link",result:function(){var e=window.prompt("Enter the link URL");e&&d("createLink",e)}},image:{icon:"üñºÔ∏è",title:"Image",result:function(){var e=window.prompt("Enter the image URL");e&&d("insertImage",e)}},html:{icon:"HTML",title:"Html",result:function(e){var t=e.parentNode,e=t.querySelector(".htmlContent"),t=t.querySelector(".tex-content");e&&("none"===e.style.display?(e.style.display="block",t.style.display="none"):(e.style.display="none",t.style.display="block"))}},textColor:{icon:"üé®",title:"Text Color",result:function(){var e=document.createElement("input");e.type="color",e.addEventListener("input",function(){d("foreColor",e.value)}),e.click()}}},v={actionbar:"tex-actionbar",button:"tex-button",content:"tex-content tex-editor",selected:"tex-button-selected"},r={exec:d,init:n};e.exec=d,e.init=n,e.default=r,Object.defineProperty(e,"__esModule",{value:!0})});